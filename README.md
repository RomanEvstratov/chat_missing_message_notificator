## Подготовка

### Telegram
1. Необходимо перейти по этой ссылке `https://core.telegram.org/api/obtaining_api_id#:~:text=%22API%20development%20tools%22`
2. Ввести номер телефона аккаунта, по которому будет привязан нотификатор, и заполнить форму для создания тг-приложения
3. В конце будут предоставлены сгенерированные `App api_id` и `App api_hash`, которые нужно будет сохранить и
внести их в `.env` файл

### Slack
1. Необходимо перейти по этой ссылке `https://api.slack.com/apps`
2. Войти в свой профиль, если необходимо, и создать новое приложение
3. Выберите `From scratch` и заполните дальнейшие поля для создания приложения
4. Попав в настройки, перейдите во вкладках слева в `OAuth & Permissions` и спуститесь до пункта `Scopes`
5. В подпункте `Bot Token Scopes` нажмите на кнопку `Add an OAuth Scope` и выберите `chat:write`
6. Поднимитесь наверх до пункта `OAuth Tokens`, нажмите на кнопку `Install to *Название workspace в slack*` и разрешите
7. После этого скопируйте полученный токен из поля `Bot User OAuth Token` и внесите его в `.env` файл
8. В самом клиенте/веб-странице Slack перейдите в канал, в который будут отправляться уведомления
9. Перейдите в `More actions`, которая отображается в виде 3 точек в правом верхнем углу, выберите `Open channel details`, 
внизу окна скопируйте `Channel ID` и вставьте в `.env` файл

### В рабочей директории
Создать файл `.env` и заполнить аргументы в соответствии с файлом '.env.example', проставив им корректные значения

## Запуск

### Локально
Выполните команды в терминале:
1. `python3 -m venv .venv`
2. `. .venv/bin/activate`
3. `pip install -r requirements.txt`
4. `python3 main.py`
5. В терминале появится запрос на ввод кода из телеграма, который получите в сообщении телеграма на аккаунте, привязанном
к номеру телефона. Введите его

### Docker
1. Выполните команду `docker compose up --build -d` и дождитесь, пока поднимуться контейнеры
2. Выполните команду `docker ps` и скопируйте `container id` у контейнера с названием `chat_missing_message_notificator-server-1`
3. Выполните команду `docker attach *container id из предыдущего шага*` и введите код, полученный из телеграма в сообщении

### Админ панель
Для того, чтобы попасть в админ панель, нужно в браузере перейти по ссылке `localhost:8000/admin` и заполнить поля
`username` и `password`, которые прописывали в `.env` файл.
В админ панели имеются вкладки `Our Users` и `Black List Chats`, которые означают `Наши пользователи` и `Блэклист чатов`
соответственно.
Для того, чтобы телеграм-клиент игнорировал определенные чаты необходимо перейти в соответствующую вкладку и 
нажать на кнопку `+ New Black List Chat` и ввести в поле `name` точное название чата телеграма.
Для того, чтобы определить пользователей, от которых ожидаются ответные реакции (реакция на сообщение/последнее сообщение),
нужно перейти в соответствующую вкладку и нажать на кнопку `+ New Our Users` и ввести в поле `telegram id`
id этого пользователя в телеграме. Чтобы узнать телеграм id пользователя нужно в аккаунте этого пользователя начать диалог
с ботом `@getmyid_bot`, который ответным сообщением отправит `Your user ID` и `Current chat ID`.

## Примечание
- После первого запуска, если вы не удалили файл в контейнере с расширением `.session`, больше не потребуется вводить код
телеграма, так как сессия телеграма сохраняется. То есть при поднятии докера не потребуется выполнять 2 и далее пункты.
- При диалоге с ботом `@getmyid_bot` в зависимости от того в личном чате или в канале начали с ним диалог, могут отличаться
значения. При личном диалоге значения в `Your user ID` и `Current chat ID` одинаковые, но в канале `Current chat ID`
будет отличаться, поэтому рекомендуется брать `Your user ID` и нужно четко понимать, что бот ответил на ваше сообщение,
а не на другого.
- Если по какой-то причине в логах отображается `Произошла непредвиденная ошибка: unable to open database file`, то,
скорее всего, был некорретно введен код из телеграм сообщенияя. Для этого необходимо зайти в сам контейнер
(если запускаете через docker compose) и удалить файл `tg_session.session` и повторно запустить 